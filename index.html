<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WoW Alliance Race Quiz</title>
<style>

  @font-face {
    font-family: 'MoreSugarThin';
    src: url('fonts/MoreSugar-Thin.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}
body {
  font-family: 'MoreSugarThin', Arial, sans-serif;
  background: #f0f0f0;
  padding: 10px;
  font-size: 28px;
}
  .quiz-container {
    max-width: 700px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
.question {
  display: none;
  margin-bottom: 20px;
}
.question.active {
  display: block;
}
.answers {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  margin-top: 15px;
}
.answers label {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 15px;
  background-color: #ce93d8;
  color: white;
  font-weight: bold;
  text-align: center;
  border-radius: 10px;
  cursor: pointer;
  transition: background 0.3s, transform 0.2s;
  user-select: none;
}
.answers label:hover {
  background-color: #b35fc5;
  transform: translateY(-3px);
}
.answers input {
  display: none;
}
.answers label.selected {
  background-color: #b35fc5;
}
button {
  margin-top: 20px;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
}
#result {
  display: none;
  text-align: center;
  margin-top: 20px;
}
#pointsDisplay {
  margin-top: 20px;
  text-align: center;
}
</style>
</head>
<body>

<div class="quiz-container">
  <h1>WoW Alliance Race Quiz</h1>

  <div id="pointsDisplay">
    <p>Human: <span id="p1">0</span> | Dwarf: <span id="p2">0</span> | Night elf: <span id="p3">0</span> | Gnome: <span id="p4">0</span></p>
  </div>

  <div id="result">
    <h2>Your race is:</h2>
    <p id="resultText"></p>
  </div>
</div>

<script>
// Kyssärit
const quizData = [
  { question: "How do you approach a challenging task?", type: "radio", options: [
    { text: "Charge in head-first with determination", points: 1 },
    { text: "Take time to understand and plan carefully", points: 2 },
    { text: "Look for creative and unconventional solutions", points: 3 },
    { text: "Persistently work through obstacles", points: 4 }
  ] },
  { question: "Which environment do you thrive in the most?", type: "radio", options: [
    { text: "A competitive and fast-paced setting", points: 1 },
    { text: "A peaceful and natural environment", points: 2 },
    { text: "A dynamic and ever-changing atmosphere", points: 3 },
    { text: "An environment where I can work independently", points: 4 }
  ] },
  { question: "What is your preferred method of problem-solving?", type: "radio", options: [
    { text: "Using brute strength and willpower", points: 1 },
    { text: "Consulting others and seeking advice", points: 2 },
    { text: "Thinking outside the box", points: 3 },
    { text: "Relying on past experiences and persistence", points: 4 }
  ] },
  { question: "How do you handle stress?", type: "checkbox", options: [
    { text: "I tackle it head-on", points: 1 },
    { text: "I find solace in nature or meditation", points: 2 },
    { text: "I adapt quickly and change my strategy", points: 3 },
    { text: "I remain calm and focus on the end goal", points: 4 }
  ] },
  { question: "What motivates you the most?", type: "radio", options: [
    { text: "The thrill of competition and victory", points: 1 },
    { text: "The desire for peace and balance", points: 2 },
    { text: "The excitement of new challenges", points: 3 },
    { text: "The drive to overcome any obstacle", points: 4 }
  ] },
  { question: "How do you prefer to spend your free time?", type: "radio", options: [
    { text: "Engaging in physical activities or sports", points: 1 },
    { text: "Relaxing in nature or gardening", points: 2 },
    { text: "Exploring new hobbies or learning skills", points: 3 },
    { text: "Reading or reflecting on life", points: 4 }
  ] },
  { question: "What kind of leader are you?", type: "radio", options: [
    { text: "A strong and commanding presence", points: 1 },
    { text: "A wise and thoughtful guide", points: 2 },
    { text: "A flexible and innovative thinker", points: 3 },
    { text: "A resilient and determined motivator", points: 4 }
  ] },
  { question: "What's your favorite type of story?", type: "radio", options: [
    { text: "Epic tales of battle and glory", points: 1 },
    { text: "Stories about harmony and wisdom", points: 2 },
    { text: "Adventures full of twists and surprises", points: 3 },
    { text: "Tales of survival against all odds", points: 4 }
  ] },
  { question: "How do you view life's challenges?", type: "radio", options: [
    { text: "Opportunities to prove my strength", points: 1 },
    { text: "Moments to learn and grow wiser", points: 2 },
    { text: "Chances to innovate and adapt", points: 3 },
    { text: "Tests of my resilience and resourcefulness", points: 4 }
  ] },
  { question: "What is your greatest strength?", type: "radio", options: [
    { text: "My unwavering determination", points: 1 },
    { text: "My deep understanding and patience", points: 2 },
    { text: "My quick thinking and adaptability", points: 3 },
    { text: "My ability to endure and persevere", points: 4 }
  ] },
  { question: "How do you react when faced with a sudden change in plans?", type: "radio", options: [
    { text: "I confront the change head-on with determination", points: 1 },
    { text: "I remain calm and assess the situation", points: 2 },
    { text: "I adapt quickly and find a new path", points: 3 },
    { text: "I look for hidden opportunities within the change", points: 4 }
  ] },
  { question: "What is your approach to teamwork?", type: "checkbox", options: [
    { text: "Taking charge and leading the group", points: 1 },
    { text: "Providing support and advice to others", points: 2 },
    { text: "Bringing creative ideas and solutions", points: 3 },
    { text: "Ensuring tasks are completed efficiently", points: 4 }
  ] },
  { question: "Which of these environments do you find most appealing?", type: "radio", options: [
    { text: "A bustling city full of energy", points: 1 },
    { text: "A serene forest with abundant wildlife", points: 2 },
    { text: "A rugged mountain landscape", points: 3 },
    { text: "An ancient ruin filled with mystery", points: 4 }
  ] },
  { question: "How do you handle conflicts with others?", type: "radio", options: [
    { text: "Confront them directly and assertively", points: 1 },
    { text: "Seek to understand and find common ground", points: 2 },
    { text: "Use humor or wit to diffuse tension", points: 3 },
    { text: "Strategically plan a resolution", points: 4 }
  ] },
  { question: "What kind of stories captivate you the most?", type: "radio", options: [
    { text: "Epic tales of heroism and battle", points: 1 },
    { text: "Stories about harmony and balance", points: 2 },
    { text: "Adventures filled with twists and turns", points: 3 },
    { text: "Dark tales of survival and resilience", points: 4 }
  ] },
  { question: "How do you react to unexpected opportunities?", type: "radio", options: [
    { text: "Embrace them with enthusiasm", points: 1 },
    { text: "Evaluate them carefully before deciding", points: 2 },
    { text: "Jump in and adapt as needed", points: 3 },
    { text: "Consider how they fit into long-term plans", points: 4 }
  ] },
  { question: "What role do you often take in a group setting?", type: "checkbox", options: [
    { text: "The leader who guides the team", points: 1 },
    { text: "The mediator who ensures harmony", points: 2 },
    { text: "The innovator who suggests new ideas", points: 3 },
    { text: "The strategist who plans ahead", points: 4 }
  ] },
  { question: "How do you view traditions?", type: "radio", options: [
    { text: "As important pillars that should be upheld", points: 1 },
    { text: "As guidelines that can be adapted", points: 2 },
    { text: "As concepts that can be challenged", points: 3 },
    { text: "As historical lessons to learn from", points: 4 }
  ] },
  { question: "What is your ideal vacation?", type: "radio", options: [
    { text: "An adventurous trip full of activities", points: 1 },
    { text: "A peaceful retreat in nature", points: 2 },
    { text: "Exploring vibrant cities and cultures", points: 3 },
    { text: "Visiting historical sites and museums", points: 4 }
  ] },
  { question: "How do you deal with failure?", type: "radio", options: [
    { text: "Learn from it and try again", points: 1 },
    { text: "Reflect on it to gain insight", points: 2 },
    { text: "Adapt quickly and move forward", points: 3 },
    { text: "Analyze it to avoid future mistakes", points: 4 }
  ] },
  { question: "What is your approach to learning new skills?", type: "radio", options: [
    { text: "Dive right in and learn through experience", points: 1 },
    { text: "Study thoroughly and understand the theory first", points: 2 },
    { text: "Experiment and adapt as I go", points: 3 },
    { text: "Learn from past experiences and apply them", points: 4 }
  ] },
  { question: "How do you react when faced with a difficult decision?", type: "radio", options: [
    { text: "Make a quick decision based on instinct", points: 1 },
    { text: "Consider all options carefully before deciding", points: 2 },
    { text: "Look for creative solutions that might not be obvious", points: 3 },
    { text: "Weigh the pros and cons and choose the most practical option", points: 4 }
  ] },
  { question: "Which of these environments would you find most inspiring?", type: "radio", options: [
    { text: "A bustling city full of energy", points: 1 },
    { text: "A serene forest or mountain", points: 2 },
    { text: "A vibrant and colorful festival", points: 3 },
    { text: "An ancient ruin with a mysterious history", points: 4 }
  ] },
  { question: "When working on a project, what role do you naturally take?", type: "radio", options: [
    { text: "The leader who drives the team forward", points: 1 },
    { text: "The planner who organizes and strategizes", points: 2 },
    { text: "The innovator who brings fresh ideas", points: 3 },
    { text: "The problem-solver who finds solutions", points: 4 }
  ] },
  { question: "How do you handle criticism?", type: "radio", options: [
    { text: "Use it as motivation to prove myself", points: 1 },
    { text: "Reflect on it to gain insight and improve", points: 2 },
    { text: "Adapt quickly and make necessary changes", points: 3 },
    { text: "Analyze it to see if there's any truth to it", points: 4 }
  ] },
  { question: "What type of stories do you enjoy the most?", type: "radio", options: [
    { text: "Epic tales of heroism and adventure", points: 1 },
    { text: "Stories with deep moral lessons", points: 2 },
    { text: "Tales filled with twists and surprises", points: 3 },
    { text: "Dark, mysterious narratives with complex characters", points: 4 }
  ] },
  { question: "How do you prepare for an important event?", type: "radio", options: [
    { text: "Train hard and focus on the goal", points: 1 },
    { text: "Plan meticulously and ensure everything is in order", points: 2 },
    { text: "Stay flexible and ready to adapt", points: 3 },
    { text: "Prepare mentally by visualizing success", points: 4 }
  ] },
  { question: "What is your ideal way to unwind after a long day?", type: "radio", options: [
    { text: "Engage in a physical workout or sport", points: 1 },
    { text: "Spend time in a peaceful natural setting", points: 2 },
    { text: "Try something new or exciting", points: 3 },
    { text: "Relax with a good book or movie", points: 4 }
  ] },
  { question: "How do you prefer to tackle a new project?", type: "radio", options: [
    { text: "Dive in headfirst and figure it out as I go", points: 1 },
    { text: "Plan carefully and consider all aspects before starting", points: 2 },
    { text: "Look for creative and unconventional approaches", points: 3 },
    { text: "Assess potential risks and prepare for challenges", points: 4 }
  ] },
  { question: "Which of these activities would you most likely enjoy?", type: "checkbox", options: [
    { text: "Weightlifting or intense physical training", points: 1 },
    { text: "Meditation or nature walks", points: 2 },
    { text: "Parkour or dance", points: 3 },
    { text: "Escape room challenges or puzzles", points: 4 }
  ] }
];


// Randomize
function shuffleArray(array) {
  return array
    .map(value => ({ value, sort: Math.random() }))
    .sort((a,b) => a.sort - b.sort)
    .map(({value}) => value);
}

const userAnswers = Array(quizData.length).fill(null);
const quizContainer = document.querySelector('.quiz-container');
let current = 0;

// --- Generoi kysymykset ---
function renderQuestion(index) {
  quizContainer.querySelectorAll('.question').forEach(q => q.remove());

  const qData = quizData[index];
  const questionDiv = document.createElement('div');
  questionDiv.className = 'question active';
  questionDiv.dataset.question = index + 1;

  const p = document.createElement('p');
  p.innerText = qData.question;
  questionDiv.appendChild(p);

  const answersDiv = document.createElement('div');
  answersDiv.className = 'answers';
  const shuffledOptions = shuffleArray(qData.options);

  shuffledOptions.forEach(opt => {
    const label = document.createElement('label');
    const input = document.createElement('input');
    input.type = qData.type;
    input.name = 'q' + (index + 1);
    input.dataset.points = opt.points;
    input.checked = userAnswers[index]?.includes(opt.points) || false;
    label.appendChild(input);
    label.appendChild(document.createTextNode(' ' + opt.text));
    if(input.checked) label.classList.add('selected');
    answersDiv.appendChild(label);

    // --- Uusi logiikka radioille: siirry heti seuraavaan ---
    if(input.type === 'radio'){
      input.addEventListener('change', () => {
        // Tallenna valinta
        userAnswers[index] = [parseInt(input.dataset.points)];
        updatePoints();
        current++;
        if(current < quizData.length) renderQuestion(current);
        else showResult();
      });
    }
  });

  questionDiv.appendChild(answersDiv);

  const navDiv = document.createElement('div');
  navDiv.style.marginTop = "20px";

  // --- Back-nappi ---
  if(index > 0){
    const backBtn = document.createElement('button');
    backBtn.textContent = 'Back';
    backBtn.addEventListener('click', ()=>{
      // Tallenna valinta jos on, muuten säilytä vanha
      const inputs = questionDiv.querySelectorAll('input');
      let selectedPoints = [];
      inputs.forEach(i=>{ if(i.checked) selectedPoints.push(parseInt(i.dataset.points)) });
      userAnswers[current] = selectedPoints.length ? selectedPoints : userAnswers[current];
      current--;
      renderQuestion(current);
      updatePoints();
    });
    navDiv.appendChild(backBtn);
  }

// --- Next-painike (näkyy aina checkboxilla ja myös radioilla, kun palataan backilla) ---
const nextBtn = document.createElement('button');
nextBtn.textContent = index === quizData.length-1 ? 'Näytä tulos' : 'Next';
nextBtn.addEventListener('click', ()=>{
  const inputs = questionDiv.querySelectorAll('input');
  let selectedPoints = [];
  inputs.forEach(i=>{ if(i.checked) selectedPoints.push(parseInt(i.dataset.points)) });
  if(selectedPoints.length === 0){ alert("You have to choose atleast one!"); return; }
  userAnswers[index] = selectedPoints;
  updatePoints();
  current++;
  if(current < quizData.length) renderQuestion(current);
  else showResult();
});

// Näytä Next-painike vain checkboxeille tai jos palataan backilla
if(qData.type === 'checkbox' || userAnswers[index]){
  navDiv.appendChild(nextBtn);
}


  questionDiv.appendChild(navDiv);
  quizContainer.insertBefore(questionDiv, document.getElementById('pointsDisplay'));
}


// Vastausten tallennus
function saveAnswer(){
  const inputs = document.querySelectorAll('.question.active .answers input');
  let selectedPoints = [];
  inputs.forEach(i=>{ if(i.checked) selectedPoints.push(parseInt(i.dataset.points)) });
  if(selectedPoints.length===0){ alert("You have to choose atleast one!"); return false; }
  userAnswers[current] = selectedPoints;
  return true;
}

// Päivitä pisteet
function updatePoints(){
  const pts = {1:0,2:0,3:0,4:0};
  userAnswers.forEach(ans => { if(ans) ans.forEach(p=>pts[p]++) });
  document.getElementById('p1').innerText = pts[1];
  document.getElementById('p2').innerText = pts[2];
  document.getElementById('p3').innerText = pts[3];
  document.getElementById('p4').innerText = pts[4];
}

// Loppuvastaus
function showResult(){
  const pts = {1:0,2:0,3:0,4:0};
  userAnswers.forEach(ans => { if(ans) ans.forEach(p=>pts[p]++) });
  const maxPoints = Math.max(...Object.values(pts));
  const result = Object.keys(pts).find(k=>pts[k]===maxPoints);
  const resultText = {1:"Human",2:"Dwarf",3:"Night elf",4:"Gnome"};
  document.getElementById('resultText').innerText = resultText[result];
  document.getElementById('result').style.display = 'block';
  document.querySelectorAll('.question').forEach(q=>q.style.display='none');
  updatePoints();
}

renderQuestion(current);
updatePoints();

document.addEventListener('change',(e)=>{
  if(e.target.tagName==='INPUT'){
    const input = e.target;
    const inputs = input.closest('.answers').querySelectorAll('input');
    if(input.type==='radio'){
      inputs.forEach(i=>i.parentElement.classList.remove('selected'));
      if(input.checked) input.parentElement.classList.add('selected');
    }else if(input.type==='checkbox'){
      input.parentElement.classList.toggle('selected', input.checked);
    }
  }
});
</script>

</body>
</html>

